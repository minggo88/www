(function(e){const t=async(e,t,r)=>{var a=new XMLHttpRequest;a.open("GET","//api."+window.location.host.replace("www.","")+"/v1.0/getChartData/?symbol="+e+"&exchagne="+t+"&period="+r,!1),a.send(null);let o=a.responseText;if(0===o.indexOf("{")&&(o=JSON.parse(o),o&&o.success)){resp=o.payload;const e=resp.split("\n").filter(e=>{if(!(e.indexOf("date")>-1))return e}).map(e=>{const[t,r,a,o,i,n,s]=e.split("\t");return{time:new Date(`${t}`).getTime()/1e3,open:1*r,high:1*a,low:1*o,close:1*i,volume:1*n}});return e}},r=e=>{let t=0;const r=e.map(e=>{const r="rgba(255,82,82, 0.8)",a="rgba(0, 150, 136, 0.8)",o=t<=e.close?a:r;return t=e.close,{time:e.time,value:1*e.volume,color:o}});return r},a=async(a,o,i,n)=>{function s(e,t,r,a){var o=l(e,t),i=d.addLineSeries({color:r||"rgba(4, 111, 232, 1)",lineWidth:a||1});i.setData(o)}function l(e,t){for(var r=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].close;return t/e.length},a=[],o=t-1,i=e.length;o<i;o++){var n=r(e.slice(o-t+1,o));a.push({time:e[o].time,value:n})}return a}o=o||"",i=i||"USD",n=n||"1d";var c=document.getElementById(a);e(c).empty();var d=LightweightCharts.createChart(c,{crosshair:{mode:LightweightCharts.CrosshairMode.Normal}});e(window).resize(function(){d.applyOptions({width:e("#"+a).outerWidth(),height:e("#"+a).outerHeight()})});var h=d.addCandlestickSeries(),p=d.addHistogramSeries({color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.8,bottom:0}}),u=await t(o,i,n);h.setData(u),p.setData(r(u)),s(u,10,"#F00"),s(u,30,"#0F0"),s(u,90,"#00F")};window.displayChart=a})(jQuery);