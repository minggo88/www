function disableclick(e){if(2==e.button)return!1}function setCookie(e,t,n){var o=new Date;o.setDate(o.getDate()+n),document.cookie=e+"="+escape(t)+"; path=/; expires="+o.toGMTString()+";"}function getCookie(e){for(var t=e+"=",n=0;n<=document.cookie.length;){var o=n+t.length;if(document.cookie.substring(n,o)==t){-1==(endOfCookie=document.cookie.indexOf(";",o))&&(endOfCookie=document.cookie.length);var i=unescape(document.cookie.substring(o,endOfCookie));return"undefined"==i?"":i}if(n=document.cookie.indexOf(" ",n)+1,0==n)break}return""}function getURLParameter(e,t){return t=new URL(t||window.location.href),r=t.searchParams.get(e),r||""}function setURLParameter(e,t,n){return n=trim(n),n=n||window.location.origin,n="."===n?window.location.href:n,n=0===n.indexOf("./")?window.location.origin+n:n,n=0===n.indexOf("/")?window.location.origin+n:n,n=n.indexOf("http")<0?window.location.origin+"/"+n:n,n=new URL(n),n.searchParams.set(e,t),n.href}function real_number_format(e,t){(void 0===e||""==e||is_null(e)||is_nan(e))&&(e="0");var n=e<0?"-":"";t&&(e=number_format(e,t)),e+="",e=e.replace(/[^0-9.]/g,"");var o=e.split(".");return o[0]=1==o[0].length?o[0]:o[0].replace(/^0+/g,""),1e3<=e&&(o[0]=number_format(o[0])),o[1]=o[1]?o[1].replace(/0{1,}$/g,""):"",o=o[1]&&o[1].length>0?o.join("."):o[0],n+o}function real_number(e){return e?1*(1*e).toFixed(8):0}function remove_array_by_value(e,t){for(var n,o,i=arguments,a=i.length;a&&e.length;)for(n=i[--a];-1!==(o=e.indexOf(n));)e.splice(o,1);return e}function get_keycode(e){return e.which?e.which:window.event.keyCode}function get_str_by_keycode(e){let t="";return t=null==window.event.which?String.fromCharCode(event.keyCode):String.fromCharCode(window.event.which),t}function input_filter_number(e){let t=e.which?e.which:event.keyCode,n=String.fromCharCode(t);if(n.match(/[^0-9]/g)&&8!=t&&9!=t&&46!=t&&35!=t&&36!=t&&37!=t&&38!=t&&39!=t&&40!=t&&96!=t&&97!=t&&98!=t&&99!=t&&100!=t&&101!=t&&102!=t&&103!=t&&104!=t&&105!=t&&48!=t&&49!=t&&50!=t&&51!=t&&52!=t&&53!=t&&54!=t&&55!=t&&56!=t&&57!=t)return!1}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function inPopup(){return!!window.opener}function htmlencode(e){return e.replace(/[&<>"']/g,function(e){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[e]+";"})}$("label,.btn,button,a,th").on("contextmenu selectstart dragstart",function(){return!1}),$("body").on("contextmenu",function(){return!1}),document.onmousedown=disableclick,$(document).ready(function(){$("[name=btn-hamburger]").on("click",function(){return $(this).toggleClass("on"),$("[name=box-menu]").animate({width:"toggle",opacity:"toggle"},50,"swing"),!1}),$(window).on("resize",function(){$(window).width()>840&&$('[name="box-menu"]').attr("style","")})}),$(document).ready(function(){$(document).bind("keydown",function(e){get_keycode(e);if(123==e.keyCode)return e.preventDefault(),e.returnValue=!1,!1})}),String.prototype.trim=function(){return this.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")},String.prototype.toNumber=Number.prototype.toNumber=function(){var e=this.toString();return e=e.replace(/[^0-9.]/g,""),""==e?0:1*e},String.prototype.format=function(e,t,n,o,i){var arguments=new Array;e&&(arguments[0]=e),t&&(arguments[1]=t),n&&(arguments[2]=n),o&&(arguments[3]=o),i&&(arguments[4]=i);var a=this;for(var r in arguments)a=a.replace("{"+r+"}",arguments[r]);return a},Object.assign||(Object.prototype.assign=function(e,t){jQuery.extend(e,t)}),translate(),jQuery(function($){function thumbnail_video(e){var t=document.getElementById("canvas");t.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight)}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader,n=document.getElementById("photo");t.onload=function(e){$("#photo").attr("src",e.target.result),n.onload=function(){imgW=this.naturalWidth,imgH=this.naturalHeight,imgW>imgH?$("#photo").addClass("land"):$("#photo").removeClass("land")}},t.readAsDataURL(e.files[0])}}function view_image(e,t,n){var o=t?t.get(0):null,i="";let a=o.tagName.toUpperCase();if(e.files&&e.files[0]){var r=new FileReader;if(!o)return;return r.onload=function(e){i=e.target.result,"IMG"==a?t.attr("src",i):t.css("background","url("+i+") no-repeat 50% 50%/cover #e1e1e1"),o.onload=function(){imgW=this.naturalWidth,imgH=this.naturalHeight,imgW>imgH?t.addClass("land"):t.removeClass("land")}},r.readAsDataURL(e.files[0]),!0}return("hidden"==e.type||"text"==e.type)&&(i=e.value,"IMG"==a?t.attr("src",i):t.css("background","url("+i+") no-repeat 50% 50%/cover #e1e1e1"),!0)}function view_video(e,t){if(e.files&&e.files[0]){var n=new FileReader,o=t?t.get(0):null;if(!o)return;n.onload=function(e){t.attr("src",e.target.result),o.onload=function(){iframeW=this.naturalWidth,iframeH=this.naturalHeight,iframeW>iframeH?t.addClass("land"):t.removeClass("land")}},n.readAsDataURL(e.files[0])}}function view_video_thumnail(e,t){var n=e.target.files[0],o=new FileReader;o.onload=function(){var e=new Blob([o.result],{type:n.type}),i=URL.createObjectURL(e),a=document.createElement("video"),r=function(){s()&&(a.removeEventListener("timeupdate",r),a.pause())};a.addEventListener("loadeddata",function(){s()&&a.removeEventListener("timeupdate",r)});var s=function(){var e=document.createElement("canvas");e.width=a.videoWidth,e.height=a.videoHeight,e.getContext("2d").drawImage(a,0,0,a.videoWidth,a.videoHeight);var n=e.toDataURL(),o=n.length>1e5;return o&&($("#thumb1").css("background","url("+n+") no-repeat 50% 50%/cover #e1e1e1"),URL.revokeObjectURL(i)),t&&"function"==typeof t&&t(),o};a.addEventListener("timeupdate",r),a.preload="metadata",a.src=i,a.muted=!0,a.playsInline=!0,a.play()},o.readAsArrayBuffer(n)}const SERVICE_NAME="kkikda";$(".box_language").on("click",".box_current",function(){$(".box_option").toggle(),$(this).find(".arrow.up,.arrow.down").toggle()}),$(".box_language").on("click",".box_option",function(){let e=$(this).attr("data-lang");e!=window.lang&&($(".box_option").toggle(),_c(e,function(){window.location.reload()}))}),$(window).resize(function(){}),$(document).on("change","input.file-upload",function(){var e=$(this).closest(".file-select"),t=$(this)[0].files[0],n=$(this)[0].files[0].size,o=n/Math.pow(1024,2);if(t.type.match("image.*"));else if(t.type.match("video.*")){var i=100;if(o>i)alert(__("100MB를 넘는 영상은 유투브 등에 업로드하시고 소스 코드를 복사해서 붙여주세요."));else{if(window.FileReader)var a=t.name;else a=$(this).val().split("/").pop().split("\\").pop();e.find("input.file-name").val(__("파일이름")+" : "+a)}}});const upload_file=function(e,t){t=t||"";let n="";if(""!=$.trim(e.val())){$form=$('<form><input type="hidden" name="token" value="'+getCookie("token")+'"></form>'),$form.attr("enctype","multipart/form-data"),e.attr("name","file_data").after(e.clone(!0)),$form.append(e);var o=new FormData($form[0]);$.ajax({url:API_URL+"/upload/?",async:!1,processData:!1,contentType:!1,data:o,type:"POST",success:function(e){if(e&&e.success&&e.payload){let o=e.payload[0];o.url?n=o.url:alert(__("{item_name} 파일을 저장하지 못했습니다.").replace("{item_name}",t))}else{let n=e.error&&e.error.message?e.error.message:"";alert(__("{item_name} 파일을 저장하지 못했습니다.").replace("{item_name}",t)+" "+n)}},fail:function(){alert(__("{item_name} 파일을 업로드하지 못했습니다.").replace("{item_name}",t))}})}return n},APP_NAME="stube",APP_VERSION="1.00.1",APP_LOAD_TIME=(new Date).getTime();let APP_RUNMODE="live",TOKEN_DOMAIN=window.location.host,API_URL="//api."+window.location.host.replace("www.","")+"/v1.0";SERVICE_DOMAIN=window.location.host.replace("www.",""),-1===window.location.host.indexOf("loc.")&&-1===window.location.host.indexOf("localhost")&&-1===window.location.host.indexOf("src.")||(APP_RUNMODE="loc",API_URL="//api."+window.location.host+"/v1.0"),-1!==window.location.host.indexOf("dev.")&&(APP_RUNMODE="dev",API_URL="//api."+window.location.host+"/v1.0"),-1!==window.location.host.indexOf("stage.")&&(APP_RUNMODE="stage",API_URL="//api."+window.location.host+"/v1.0");const LOGIN_PAGE="/login.html";$.fn.numericVal=function(){return 1*$(this).val().replace(/[^0-9.]/g,"")},$.fn.hScroll=function(e){e=e||120,$(this).bind("DOMMouseScroll mousewheel",function(t){var n=t.originalEvent,o=n.detail?n.detail*-e:n.wheelDelta,i=$(this).scrollLeft();i+=o>0?-e:e,$(this).scrollLeft(i),t.preventDefault()})};let APP_LANG=window.lang||"ko";const change_language=function(e){e&&e!==APP_LANG&&(tpl={},APP_LANG=e,$("html").attr("lang",APP_LANG),Model.user_info.userid&&add_request_item("putMyInfo/putLanguage.php",{display_language:e},function(e){}),_c(e,function(){reload()}))};$(".box_language").on("click",function(){$(".box_language .flags").toggle()}),$(".box_language [name=btn_language]").on("click",function(){let e=$(this).attr("data-lang");change_language(e)});var referrer="";let path_name=window.location.pathname,page_name="",__listener__={},__data__={},model_item=!1,session_item=model_item&&model_item.session_item||["token","user_info","user_wallet","visited_notice","hide_popup_time","user_goods"],local_item=model_item&&model_item.local_item||["hide_notice","auto_login","exchange_rate","goods","web_config","company_info","last_login_info","currency","hide_popup_time","model_item","site_info"],cookie_item=model_item&&model_item.cookie_item||["check_pin"],_no=(Math.random()+(new Date).getTime()/Math.random()+"").replace(".",""),key=getCookie("token");key?key=APP_NAME+APP_VERSION+key:(setCookie("token",_no,0,TOKEN_DOMAIN),key=APP_NAME+APP_VERSION+_no);const set_model_location=function(e,t){"session"===t&&(local_item=remove_array_by_value(local_item,e),void 0===session_item[e]&&session_item.push(e)),"local"===t&&(session_item=remove_array_by_value(session_item,e),void 0===local_item[e]&&local_item.push(e))},clone=function(e){return JSON.parse(JSON.stringify(e))},addChangeListener=function(e,t,n){const o=t;__listener__[e]?__listener__[e][o]=n:(__listener__[e]={},__listener__[e][o]=n)},rander=function(e,t,n,o){for(i in t){let a=t[i],r=null,s=n&&n[i]?n[i]:"";(a!==s||o)&&(typeof a==typeof{}?rander(e+"."+i,a,s,o):($('[data-bind="'+e+"."+i+'"]').each(function(){var e=this.tagName,t=(e=e.toUpperCase(),$(this).attr("data-format"));switch(t){case"table":const e=a,n=$(this),o=n.find("[name=empty]"),i=n.find("[name=search]");if(i.hide().addClass("hide"),o.hide().addClass("hide"),!e||e.length<1)o.show().removeClass("hide"),n.children().not("[name=tpl],[name=search],[name=empty]").remove();else{let t=[],o=$("<div></div>").append(n.find("[name=tpl]").clone().attr("name","").removeClass("hide"));for(let n in e){let i=e[n],a=o.clone();for(let e in i){let t=a.find('[data-bind="row.'+e+'"]'),n=i[e],o=t.attr("data-format"),r=t.attr("data-decimals");switch(o){case"attr":t.attr("data-"+e,n);break;case"comma":t.text(real_number_format(n,r));break;case"date":t.each(function(){let e=$(this).attr("data-date_format")||"";$(this).text(e?date(e,n):n)});break;case"add-class":t.addClass(n);break;case"number":t.text((n+"").replace(/[^0-9.-]/g,""));break;default:t.each(function(){const e=this.tagName?this.tagName.toUpperCase():"";switch(e){case"A":t.attr("href",n);break;default:"html"==o?t.html(n):t.text(n)}})}}t[n]=a.html()}n.children().not("[name=tpl],[name=search],[name=empty]").remove(),n.append(t.join(""))}break;case"comma":r=real_number_format(a);break;case"number":r=1*(a+"").replace(/[^0-9.]/g,"");break;case"add-class":return void $(this).addClass(a);default:r=a}switch(e){case"INPUT":let t=($(this).attr("type")+"").toUpperCase();switch(t){case"CHECKBOX":let e=a==$(this).val();(e&&!$(this).is(":checked")||!e&&$(this).is(":checked"))&&$(this).trigger("click");break;case"RADIO":r==$(this).val()&&$(this).trigger("click");break;case"NUMBER":case"HIDDEN":$(this).val(r);break;default:r=r&&r.toNumber()==r&&"number"==(typeof r).toLowerCase()&&!(r+"").match(/[^0-9.]/)?real_number_format(r):r,$(this).val(r)}break;case"TEXTAREA":case"SELECT":$(this).val(r);break;case"IMG":case"IFRAME":$(this).attr("src",r);break;default:"userid"!=i&&(r=r&&r.toNumber()==r&&"number"==(typeof r).toLowerCase()&&!(r+"").match(/[^0-9.]/)?real_number_format(r):r),$(this).html(r)}}),$('[data-display^="'+e+"."+i+'"]').each(function(){let e=$(this).attr("data-display");e=e.split("="),a==e[1]?$(this).removeClass("hide").attr("style",""):$(this).addClass("hide").attr("style","")})))}};"live"!=APP_RUNMODE&&(window.rander=rander);const force_rander=function(e,t){rander(e,t,t,!0)};"live"!=APP_RUNMODE&&(window.force_rander=force_rander);const _get_Model_value=function(e,t){let n=e[t]?JSON.parse(Decrypt(e[t],key,256)):"";try{session_item.indexOf(t)>-1&&sessionStorage.getItem(t)&&(n=JSON.parse(Decrypt(sessionStorage.getItem(t),key,256))),local_item.indexOf(t)>-1&&(n=JSON.parse(Decrypt(localStorage.getItem(t),key,256))),cookie_item.indexOf(t)>-1&&(n=getCookie(t))}catch(e){n=""}return n},handler={get:function(e,t){return _get_Model_value(e,t)},set:function(e,t,n){let o=_get_Model_value(e,t);try{session_item.indexOf(t)>-1?sessionStorage.setItem(t,Encrypt(JSON.stringify(n),key,256)):local_item.indexOf(t)>-1?localStorage.setItem(t,Encrypt(JSON.stringify(n),key,256)):cookie_item.indexOf(t)>-1?setCookie(t,n):e[t]=Encrypt(JSON.stringify(n),key,256),JSON.stringify(n)!==JSON.stringify(o)&&rander&&rander(t,n,o)}catch(e){}return!0}};let Model={};try{Model=new Proxy(__data__,handler)}catch(e){let t=clone(Model);const n=function(){for(i in Model){let e=Model[i],n=t[i];JSON.stringify(e)!==JSON.stringify(n)&&rander&&rander(i,e,n)}t=clone(Model),setTimeout(function(){n()},100)};n()}"live"!=APP_RUNMODE&&(window.Model=Model),Model.check_SMS_for_bank=!1,Model.currency={KRW:{pre_symbol:"",sub_symbol:__("원"),exchange_price:1,is_blockchain:!1,is_virtual_currency:!1,symbol_image:"",name:"대한민국 원"},USD:{pre_symbol:"$ ",sub_symbol:"",exchange_price:1400,is_blockchain:!1,is_virtual_currency:!1,symbol_image:"",name:"USD"}},Model.exchange_rate={base_currency:"KRW",base_symbol:"$",KRW:Model.currency.KRW.exchange_price,USD:Model.currency.USD.exchange_price},Model.company_info={bank_name:"",bank_address:"",depositor:"",fee_address:{BDC:"",GWS:"",HTC:"",KRW:""}},Model.goods={product:[]},Model.web_config={};var items=[],callbacks=[],timeoutkeys=[],request_warkable=!0;const request_api=function(){if(setTimeout(request_api,300),request_warkable&&items&&items.length>0){request_warkable=!1;var e=items,t=callbacks;items=[],callbacks=[];let n={item:e};n.token=getCookie("token"),$.post(API_URL+"/request/?",n,function(e){request_warkable=!0;const n=e.payload.length;for(let o=0;o<n;o++){const n=e.payload[o],i=JSON.parse(n.data);i.error&&i.error.code,t[o]&&t[o](i,o)}},"json")}};request_api();const add_request_item=function(e,t,n,o,i,a){var r=path_name;i=i||r;if(o>0&&i!==r)return!1;t.lang=APP_LANG,Model.token&&(t.token=Model.token);const s={method:e,params:t};if(!a)for(var l in items)if(JSON.stringify(items[l])==JSON.stringify(s))return;items.push(s);let c=items.length-1;if(callbacks[c]=n,o>0&&i===r){let i=setTimeout(function(){add_request_item(e,t,n,o,r)},o);timeoutkeys[c]=i}},dprice=function(e,t){let n=t||Model.user_info&&Model.user_info.exchange_currency||Model.exchange_rate.base_currency,o=Model.currency[n].pre_symbol,i=Model.currency[n].sub_symbol,a=Model.currency[n].exchange_price;return o+real_number_format(e*a)+i},genPagingStube=function(e,t,n,o){for(e=e?1*e:0,t=t?1*t:1,n=n?1*n:10,o=o?1*o:10,max_pages=e?Math.ceil(e/n):1,r="",r+=e>0&&t>1?'<span><a href="'+setUrlParamValue("page",t-1,window.location.search)+'"><img src="/@resource/images/icon/ico_arr_prev.png" alt=""></a></span>':'<span><img src="/@resource/images/icon/ico_arr_prev.png" alt="" class="inactive"></span>',batch=Math.ceil(t/o),end=batch*o,end,end>max_pages&&(end=max_pages),start=end-o+1,start=start<1?1:start,i=start;i<=end;i++)i==t?r+='<span class="num active"><a href="'+setUrlParamValue("page",i,window.location.search)+'">'+i+"</a></span>":r+='<span class="num"><a href="'+setUrlParamValue("page",i,window.location.search)+'">'+i+"</a></span>";return e>0&&t<max_pages?r+='<span><a href="'+setUrlParamValue("page",t+1,window.location.search)+'"><img src="/@resource/images/icon/ico_arr_next.png" alt=""></a></span>':r+='<span><img src="/@resource/images/icon/ico_arr_next.png" alt="" class="inactive"></span>',r},display_remain_time=(e,t,n)=>{let o=e-Math.floor((new Date).getTime()/1e3),i=o<0?0:Math.floor(o/60),a=o<0?0:o%60;$(t).text(sprintf("%02d",i)),$(n).text(sprintf("%02d",a)),o>=0&&setTimeout(function(){display_remain_time(e,t,n)},500)},load_file=e=>{if($("#"+md5(e)).length>0)return!1;e.indexOf(".js")>0&&$("body").append('<script type="text/javascript" src="'+e+'" id="'+md5(e)+'"></script>'),e.indexOf(".css")>0&&$("head").append('<link rel="stylesheet" type="text/css" href="'+e+'" id="'+md5(e)+'">')},gen_qrcode=(e,t)=>{$(e).empty().qrcode({width:$(e).width(),height:$(e).width(),text:t})},CopyUrlToClipboard=e=>{var t=document.getElementById("ShareUrl");t.value=window.document.location.href,t.select(),document.execCommand("copy"),t.blur()};let sound_obj={};const sound_file={};for(i in sound_file){let e=new Audio;e.src=sound_file[i],sound_obj[i]=e}const sound_play=e=>{"N"!==Model.user_info.sound_onoff&&sound_obj[e]},get_video_url=function(e){e=$.trim(e);let t="";return e.indexOf("//youtu.be/")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/youtu.be\//,"").replace(/\&.*/,""):e.indexOf("//youtube.com/watch?v=")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/youtube.com\/watch\?v=/,"").replace(/\&.*/,""):e.indexOf("//m.youtube.com/watch?v=")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/m.youtube.com\/watch\?v=/,"").replace(/\&.*/,""):e.indexOf("//www.youtube.com/watch?v=")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/www.youtube.com\/watch\?v=/,"").replace(/\&.*/,""):e.indexOf("<iframe ")>-1?(t=e.match(/src="(.[^"]*)"/),t=t?t[1]:e.match(/src='(.[^']*)'/)?e.match(/src='(.[^']*)'/)[1]:"",t=t||(e.match(/src=(.[^ ]*) /)?e.match(/src=(.[^ ]*) /)[1]:"")):e.indexOf("http://")>-1||e.indexOf("https://"),t},get_video_img=function(e){let t=[];if(e.indexOf("youtube")>-1){let n="";e.indexOf("//www.youtube.com/embed/")>-1&&(n=e.replace("https://www.youtube.com/embed/",""),n&&n.indexOf("?")>-1&&(n=n.substr(0,n.indexOf("?")))),e.indexOf("//www.youtube.com/watch")>-1&&(n=e.match(/youtube.com\/watch\?v=(.[^&]*)/),n=n?n[1]:""),$.get({url:"https://www.youtube.com/oembed?format=xml&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D"+n,async:!1,success:function(e){t.push($("thumbnail_url",t).text())}})}return t},check_userinfo=function(){return Model.user_info&&Model.user_info.userno?Model.user_info&&Model.user_info.userno&&!Model.user_info.nickname?(alert(__("회원정보를 등록 해주세요")),closeModal(),$('.btn-user-menu[name="btn-userinfo"]').click(),!1):void 0:(alert(__("로그인 해주세요")),closeModal(),!1)},use_http=function(){};let scroll_searching=!1,scroll_end=!1;const tpl_video_item='<li><a href="/views.php?video_idx={video_idx}"><div class="img" style="background-image:url({video_img});background-size:cover" alt="{title}"></div></a><div class="explan"><a href="user-main.php?userno={video_userno}"><span class="picture" style="background-image:url({user_profile_img})"></span></a><p class="txt"><a href="/views.php?video_idx={video_idx}">{title}</a></p><div class="pay_date"><p class="pay"><a href="user-main.php?userno={video_userno}"><span class="name">{nickname}</span></a><span class="ico_pay"></span><span>{view_cnt}</span></p><p class="date">{reg_date}</p></div></div></li>',gen_video_htmnl=function(e){if(e&&e.payload){let t=[],n=e.payload.data||[];for(n.length<1&&(scroll_end=!0),i=0;i<n.length;i++){let e=n[i];t[i]=tpl_video_item.replace(/\{video_img\}/g,e.file_name||"about:blank").replace(/\{user_profile_img\}/g,e.profile_img||"/@resource/images/common/basic_profile.png").replace(/\{nickname\}/g,e.nickname||"").replace(/\{title\}/g,e.title||"").replace(/\{reg_date\}/g,e.reg_date.substr(1,10)||"").replace(/\{video_idx\}/g,e.idx||"").replace(/\{video_userno\}/g,e.userno||"").replace(/\{view_cnt\}/g,real_number_format(e.view_cnt)||"")}$(".play-list ul.item-grid").append(t.join(""))}scroll_searching=!1},add_event_click_left_menu_tab=function(){$("#left_menu .inTabs li").on("click",function(){let e=$(this).attr("data-target");$(this).addClass("active").siblings().removeClass("active"),$(e).show().siblings(".tab_con").hide()})},check_login=function(e){Model.user_info&&(Model.user_info.userid||Model.user_info.userno)||(e&&alert(e),window.location.href=LOGIN_PAGE)},check_logout=function(e){Model.user_info&&Model.user_info.userid&&Model.user_info.userno&&(e&&alert(e),window.location.href="/")},get_new_message=function(e){let t=$("[name=msg_box]:last").attr("data-idx");add_request_item("getChatMessage",{token:getCookie("token"),last_msg_idx:t,target_idx:window.chat_target_idx},function(e){if(e&&e.success&&e.payload&&!e.error){let t=e.payload,n=[],o=0,i=!1;if(t.length>0){for(o in t){let e=t[o];$("li[name=msg_box][data-idx="+e.idx+"]").length>0||(n[o]=get_html(e),o++)}$(".comment-wrap").scrollTop()+$(".comment-wrap").innerHeight()>$(".comment-wrap")[0].scrollHeight-20&&(i=!0),$("[name=comment-list]").append(n.join("")),i&&set_scroll_bottom()}}}),e>0&&setTimeout(function(){get_new_message(e)},e)},tpl_suport='<div class="realtime_spon" name="msg_box" data-idx="{idx}">    {html_delete_icon}    <p class="pay_meney">{amount_str}<img src="/@resource/images/icon/ico_smart_pay.png" alt=""></p><p class="txt"><a href="/user-main.php?userno={userno}">{nickname}</a> 님이 {amount_str} PAY를 조공하였습니다</p></div>',tpl_chat='<dl name="msg_box" data-idx="{idx}">    {html_delete_icon}    <dt><a href="/user-main.php?userno={userno}"><img src="{profile_img}" alt="{nickname}"></a></dt><dd><p class="name"><a href="/user-main.php?userno={userno}">{nickname}</a> <img src="/@resource/images/icon/ico_fan1.png" alt=""></p><p class="txt">{comment}</p></dd></dl>',get_html=function(e){let t=e.amount>0?tpl_suport:tpl_chat;return t.replace(/\{idx\}/g,e.idx).replace(/\{profile_img\}/g,e.profile_img||"/@resource/images/common/basic_profile.png").replace(/\{nickname\}/g,e.nickname||e.name).replace(/\{amount\}/g,e.amount).replace(/\{userno\}/g,e.userno).replace(/\{amount_str\}/g,number_format(e.amount)).replace(/\{coinname\}/g,Model.currency&&Model.currency[e.symbol]&&Model.currency[e.symbol].name).replace(/\{coin_icon\}/g,get_coin_icon_class(e.amount)).replace(/\{comment\}/g,nl2br(htmlspecialchars(e.comment))).replace(/\{supported-user\}/g,e.amount>0?"supported-user":"").replace(/\{hide_spon\}/g,e.amount>0?"":"hide").replace(/\{html_delete_icon\}/g,e.userno==Model.user_info.userno?'<a href="#" class="chat_close"><img src="/@resource/images/icon/ico_close2.png" alt="" data-idx="'+e.idx+'" class="btn btn-delete-msg"></a>':"")},get_old_message=function(){if(scroll_searching||scroll_end)return!1;scroll_searching=!0;let e=$("[name=msg_box]:first").attr("data-idx");add_request_item("getChatMessage",{token:getCookie("token"),prev_msg_idx:e,target_idx:window.chat_target_idx},function(t){if(scroll_searching=!1,t.payload&&t.payload.length||(scroll_end=!0,$("[name=comment-list]").prepend('<li class="center">'+__("더이상 내용이 없습니다.")+"</li>")),t&&t.success&&!t.error){let n=t.payload,o=[],i=0;for(i in n){let e=n[i];o[i]=get_html(e),i++}$("[name=comment-list]").prepend(o.join("")),$(".comment-wrap").scrollTop($("li[data-idx="+e+"]").position().top)}})},set_scroll_bottom=function(){$(".comment-wrap:visible").scrollTop($("[name=comment-list]:visible").height())},set_position_chatbox=function(){$(".right_menu").is(":visible")?($(".mobile_cheat_box").hide(),set_scroll_bottom()):($(".mobile_cheat_box").show(),set_scroll_bottom())},request_user_info=function(){add_request_item("getMyInfo",{token:getCookie("token")},function(e){if(e&&e.success&&!e.error){let t=e.payload;Model.user_info=t,force_rander("user_info",t),reset_logedin_status()}})};request_user_info(),window.get_user_info=function(){return clone(Model.user_info)};const get_user_wallet=function(){add_request_item("getBalance",{token:getCookie("token")},function(e){if(e&&e.success&&!e.error){let t={};for(i in e.payload){let n=e.payload[i];n.confirmed=1*n.confirmed,n.unconfirmed=1*n.unconfirmed,t[n.symbol]=n}Model.user_wallet=t}})};get_user_wallet();const get_currency=function(){add_request_item("getCurrency",{},function(e){if(e&&e.success&&!e.error){let t=Model.currency,n=Model.exchange_rate;for(i in e.payload){let o=e.payload[i];"HTC"==o.symbol&&(o.price=1e4),t[o.symbol]?(t[o.symbol].exchange_price=1*o.price,t[o.symbol].name=o.name):t[o.symbol]={exchange_price:1*o.price,is_blockchain:"Y"==o.crypto_currency,is_virtual_currency:!0,pre_symbol:"",sub_symbol:" "+o.symbol,name:" "+o.name,symbol_image:""},n[o.symbol]&&(n[o.symbol]=1*o.price)}Model.currency=t,Model.exchange_rate=n}})};get_currency();const fn_index=function(){API.getBBSList("notice",1,5,e=>{e.success&&($("#notice--list").empty(),e.payload.data.map(e=>{const t=$("<li>"),n=new Date(e.regdate);t.append(`<a href="notice_detail.html" class="list--text">${e.subject}</a>`),t.append(`<span class="list--date list--right">${n.getFullYear()}.${n.getMonth()}.${n.getDate()}</sp>`),t.appendTo("#notice--list")}))}),add_request_item("getTradeGoodsSummary",{},function(e){e&&e.success&&e.payload&&(Model.trade_goods_summary=e.payload)}),add_request_item("getMainNoticeList",{bbscode:"notice",by_category:"N"},function(e){if(e&&e.success&&e.payload){let t=[];const n=$("[name=main_notice]"),o=$("<div></div>").append(n.find("[name=tpl]").clone().attr("name","").css("display","").removeClass("hide")).html();for(i in notice_list=e.payload,notice_list){let e=notice_list[i];e.file&&t.push(o.replace("{message}",e.file?'<img src="'+e.file+'" style="height:50px">':e.contents).replace("{hide_new}",'style="display:none;"').replace("{hide_tag}",'style="display:none;"'))}(!notice_list||notice_list.length<1)&&n.closest(".news").hide(),$("[name=main_notice]").empty().append(t.join("")),new Swiper(".news .column .swiper .swiper-wrapper",{slidesPerView:1,direction:"vertical",loop:!0,allowTouchMove:!0,noSwiping:!0,noSwipingClass:"swiper-slide",preventInteractionOnTransition:!0,autoplay:{delay:2500,disableOnInteraction:!1}})}}),window.displayChart("indexCanvas","GCA18KTDKK",Model.exchange_rate.base_currency,"1h");const e=$("[name=price_table]"),t=e.find("[name=empty]"),n=e.find("[name=search]");n.removeClass("hide").show(),add_request_item("getSpotPrice",{symbol:"HOT"},function(o){if(o&&o.success&&o.payload){const a=o.payload;let r=[];const s=$("<div></div>").append(e.find("[name=tpl]").clone().attr("name","").css("display","").removeClass("hide")).html();for(i in a){const e=a[i];e&&e.name&&(e.price_open*=1,e.price_close*=1,e.exchange=Model.exchange_rate.base_currency,e.price_updown_sign=e.price_close>e.price_open?"+":e.price_close<e.price_open?"-":"",e.price_updown_symbol="+"==e.price_updown_sign?"▲":"-"==e.price_updown_sign?"▼":"",e.price_updown_color="+"==e.price_updown_sign?"text-red":"-"==e.price_updown_sign?"text-blue":"",e.price_updown_amount=e.price_close-e.price_open,e.price_updown_rate=(e.price_close-e.price_open)/e.price_open,e.price_updown_percent=((e.price_close-e.price_open)/e.price_open*100).toFixed(2)+"%",a[i]=e,r.push(s.replace("{symbol}",e.symbol).replace("{exchange}",e.exchange).replace("{stock_name}",e.name).replace(/\{stock_updown_color\}/g,e.price_updown_color).replace("{stock_price}",real_number_format(e.price_close)).replace("{stock_exchange}",e.exchange).replace("{stock_updown_percent}",e.price_updown_percent)))}Model.spot_prices=a,e.children().not("[name=tpl],[name=search],[name=empty]").remove(),r.length>0?e.append(r.join("")).find("li:visible").trigger("click"):t.removeClass("hide").show(),n.addClass("hide").hide()}}),Model.chart_info={symbol:"",exchange:"",term:"12h",last_time:time(),last_date:date("Y.m.d H:i A")},$("[name=price_table]").on("click","li",function(){}),$('[name="chart_term"] button').on("click",function(){const e=$(this).attr("name"),t=e.replace("btn-term-","");chart_info=clone(Model.chart_info),chart_info.term=t,Model.chart_info=chart_info,window.displayChart("indexCanvas",chart_info.symbol,chart_info.exchange,chart_info.term),$(this).closest("li").addClass("on").siblings("li").removeClass("on")})},fn_login=function(){check_logout(),window.keypress_support=!1,$("#box_login form").each(function(){$(this).reset&&$(this).reset()}),$("#box_login [name=email]").get(0).focus(),$("#box_login form[name=login]").on("submit",function(e){e.preventDefault();const t=$("#email"),n=trim(t.val()),o=$("#password"),i=trim(o.val());return n?i?(API.login(n,i,e=>{if(e&&e.success&&e.payload){setCookie("token",e.payload.token),Model.token=e.payload.token,Model.last_login_info={userid:n};let t={userid:n};Model.user_info=t,get_user_wallet(),request_user_info();let o=getURLParameter("ret_url");o=o?$.trim(base64_decode(o)):"/",o=setURLParameter("t",time(),o),window.location.href=o}else{let t=e.error&&e.error.message?e.error.message:__("로그인 정보가 올바른지 확인해주세요.");$(".validation--message").find(">p").text(t).end().show()}}),!1):(o.focus(),!1):(t.focus(),!1)})},fn_logout=function(){$.post(API_URL+"/logout/",{token:getCookie("token")},function(e){Model.user_info={},reset_logedin_status(),Model.auto_login=!1,Model.visited_notice=!1,setCookie("token","",-1),setCookie("token","",-1,"."+TOKEN_DOMAIN),window.location.href="/"})};window.logout=fn_logout,fn_member_account=function(){request_user_info(),force_rander("user_info",Model.user_info)},fn_repw=function(){check_logout(__("로그아웃 해주세요.")),$("[name=btn_repw]").on("click",function(){$("[name=box_notice]").html("").parent().hide();let t=$("[name=pin]").val();if(!t)return e(__("비밀번호를 입력해주세요.")),$("[name=pin]").trigger("select"),!1;let n=$("[name=pin2]").val();if(t!=n)return e(__("비밀번호가 다릅니다.")+" "+__("올바른 비밀번호를 다시 입력해주세요.")),$("[name=pin2]").trigger("select"),!1;const o={t:getURLParameter("t"),pin:t};return add_request_item("resetPW",o,function(e){if(e&&e.success)$("#form_repw").length>0&&$("#form_repw").get(0).reset(),alert(__("Changed your password.")+" "+__("Please log in again.")),setTimeout(function(){window.location.href="login.html"},2e3);else{let t=e.error&&e.error.message?e.error.message:"";alert(__("Failed to change password.")+" "+t)}}),!1});const e=function(e){$("[name=box_notice]").html(e).parent().show()}},fn_wallet_deposit=function(){check_login(),force_rander("user_info",Model.user_info),force_rander("site_info",Model.site_info),add_request_item("getConfig",{},function(e){e&&e.success&&(Model.site_info=e.payload)}),force_rander("user_wallet",Model.user_wallet),get_user_wallet();const e=new ClipboardJS(".btn--copy");e.on("success",function(e){alert("클립보드에 복사되었습니다."),e.clearSelection()}),$('[name="btn-save-deposit"]').on("click",function(){const e=$.trim($("[name=symbol]").text()),t=$("[name=deposit_amount]"),n=$.trim(t.val());if(n<=0)return alert(__("입금액을 입력해주세요.")),t.select(),!1;const o=$("[name=deposit_name]"),i=$.trim(o.val());if(!i)return alert(__("입금자 이름을 입력해주세요.")),o.select(),!1;const a=$.trim($("[name=address]").val());add_request_item("deposit",{symbol:e,deposit_amount:n,deposit_name:i,address:a},function(e){e&&e.success?(alert(__("입금 신청을 완료했습니다.")),$("[name=deposit_amount]").val("0"),$("[name=deposit_name]").val("")):alert(__("입금 신청을 완료하지 못했습니다."))})})};let page_controller=window.location.pathname.replace(/\/(.*).php|.html/,"$1");page_controller=page_controller.replace(/-/g,"_"),page_controller=page_controller&&"/"!=page_controller?page_controller:"index",page_controller=0===page_controller.indexOf("/")?substr(page_controller,1):page_controller;try{eval("fn_"+page_controller+"()")}catch(e){}const reset_logedin_status=function(){const e=Model.user_info;e.userno&&e.userid?($("[name=box_logedin]").show(),$("[name=box_unlogedin]").hide()):($("[name=box_logedin]").hide(),$("[name=box_unlogedin]").show())};$('[name="btn-logout"]').on("click",function(){return fn_logout(),!1}),$('[name="btn-profile"]').on("click",function(){return $(".box_submenu").toggle(),!1});const default_profile_img="/@resource/images/common/basic_profile.png";$(document).on("error",".img_profile",function(){alert(1),
$(this).attr("src",default_profile_img)}),$(".scroll-content").length>0&&$(".scroll-content").each(function(){$(this).scrollbar({ignoreMobile:!0})}),$(document).on("keyup",".onlynum",function(e){$(this).val($(this).val().replace(/[^0-9.,]/g,""))}).on("keydown",".onlynum",input_filter_number),$(document).on("keyup change",".realnumber",function(e){$(this).val(real_number_format($(this).val()))}).on("keydown",".onlynum",input_filter_number),$(document).on("keyup",".onlyeng",function(e){$(this).val($(this).val().replace(/[^\!-z]/g,""))})});