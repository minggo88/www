<!DOCTYPE html>
<html lang="ko">
<head>
<!-- META -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>끽다거</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;350;400;500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./assets/css/colorset.css">
<link rel="stylesheet" href="./assets/css/common.css">
<link rel="stylesheet" href="./assets/css/components.css">
<link rel="stylesheet" href="./assets/css/sub.css">
<link rel="stylesheet" href="./assets/css/mypage.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/smoothness/jquery-ui.css" />
<style>
    .product--image {
        width: 32px;
        height: 32px;
        display: inline-block;
        line-height: 32px;
        text-align: center;
        border: 0.35px solid #E5E8EB;
        border-radius: 2px;
        margin-right: 3px;
    }

    .product--image img {
        vertical-align: middle;
    }
</style>
<!-- JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
<script src="./assets/js/api.js"></script>
<script src="./assets/js/components.js"></script>
</head>
<!-- BODY -->
<body class="sub notice">
    <header>
        <h1 class="logo"><a href="/">Teaplat</a></h1>
        <nav class="nav">
            <ul>
                <li>
                    <a href="exchange.html">거래소</a>
                </li>
                <li>
                    <a href="">공동구매</a>
                </li>
                <li>
                    <a href="">경매</a>
                </li>
                <li>
                    <a href="">가이드</a>
                </li>
                <li>
                    <a href="">다도 문화</a>
                </li>
                <li>
                    <a href="">고객센터</a>
                </li>
            </ul>
            <div class="nav--side">
                <div class="profile dropdown-wrapper">
                    <button type="button" class="dropdown text--blue-gray">
                        kik**@teaplat.com
                    </button>
                    <div class="dropdown--item" style="width: 134px">
                        <ul>
                            <li><a href="member-account.html">정보 수정</a></li>
                            <li><a href="my-verification.html">ID 인증 관리</a></li>
                            <li><a href="change-pin-number.html">보안비밀번호변경</a></li>
                            <li><a href="change-account-number.html">출금계좌 변경</a></li>
                            <li><a href="transaction.html">거래 내역</a></li>
                            <li><a href="notification.html">알림</a></li>
                            <li><a href="withdrawal.html">회원 탈퇴</a></li>
                        </ul>
                    </div>
                </div>
                <div class="wallet dropdown-wrapper">
                    <button type="button" class="dropdown">지갑관리</button>
                    <div class="dropdown--item" style="width: 100px">
                        <ul>
                            <li><a href="">보유 자산</a></li>
                            <li><a href="">입금</a></li>
                            <li><a href="">출금</a></li>
                            <li><a href="">종합 분석</a></li>
                        </ul>
                    </div>
                </div>
                <div class="language">
                    <div class="dropdown-wrapper">
                        <button type="button" class="dropdown">한국어</button>
                        <div class="dropdown--item" style="width: 81px">
                            <span>한국어</span>
                            <ul>
                                <li class="dropdown--selected"><a href="">ENG</a></li>
                                <li><a href="">中文</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main class="d-grid">
        <aside class="side">
            <h1>계정 관리</h1>
            <nav class="side--snb">
                <ul>
                    <li>
                        <a href="member-account.html">정보 수정</a>
                    </li>
                    <li>
                        <a href="my-verification.html">ID 인증 관리</a>
                    </li>
                    <li class="snb--active">
                        <a href="change-pin-number.html">보안비밀번호 변경</a>
                    </li>
                    <li>
                        <a href="change-account-number.html">출금계좌 변경</a>
                    </li>
                    <li>
                        <a href="transaction.html">거래 내역</a>
                    </li>
                    <li>
                        <a href="notification.html">알림</a>
                    </li>
                    <li>
                        <a href="withdrawal.html">회원 탈퇴</a>
                    </li>
                </ul>
            </nav>
        </aside>
        <div class="contents">
            <header class="contents--header">
                <h1>Change Pin Number</h1>
            </header>
            <form id="change-security-password" action="change-security-password2.html" method="post" style="width: 100%; height: auto" >
                <div class="boxed boxed--transparent text--center" style="height: 333px; padding: 36px 0 56px">
                    <div class="text--center">
                        <h2 class="m-0 mb-24 text--bbold size--18">거래용 보안비밀번호 변경</h2>
                        <h2 class="m-0 text--medium text-bold">현재 사용 중인 보안비밀번호(Pin Number)를 입력하세요.</h2>
                    </div>
                    <div style="margin-top: 52px;">
                        <div class="d-flex flex-center">
                            <div class="d-grid  grid--code">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text--center"><input type="submit" value="수정하기" class="btn btn--red" style="width: 340px; margin-top: 40px"></div>

            </form>
            <form id="change-security-password2" action="change-security-password-confirm.html" method="post" style="width: 100%; height: auto; display: none" >
                <div class="boxed boxed--transparent text--center" style="height: 333px; padding: 36px 0 56px">
                    <div class="text--center">
                        <h2 class="m-0 mb-24 text--bbold size--18">거래용 보안비밀번호 변경</h2>
                        <h2 class="m-0 text--medium text-bold ">새로 사용할 보안비밀번호(Pin Number)를 입력하세요.</h2>
                    </div>
                    <div style="margin-top: 52px;">

                        <div class="d-flex flex-center">
                            <div class="d-grid  grid--code">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text--center"><input type="submit" value="수정하기" class="btn btn--red" style="width: 340px; margin-top: 40px"></div>

            </form>
            <form id="change-security-password-confirm" action="change-security-password-complete.html" method="post" style="width: 100%; height: auto; display: none" >
                <div class="boxed boxed--transparent text--center" style="height: 333px; padding: 36px 0 56px">
                    <div class="text--center">
                        <h2 class="m-0 mb-24 text--bbold size--18">거래용 보안비밀번호 변경</h2>
                        <h2 class="m-0 text--medium text-bold ">보안비밀번호(Pin Number)를 한번 더 입력하세요.</h2>
                    </div>
                    <div style="margin-top: 52px;">

                        <div class="d-flex flex-center">
                            <div class="d-grid grid--code">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                                <input type="number" name="" min="0" max="9" maxlength="1">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text--center"><input type="submit" value="수정하기" class="btn btn--red" style="width: 340px; margin-top: 40px"></div>
            </form>
            <div id="change-security-password-complete" style="width: 100%; height: auto; display: none" >
                <div class="boxed boxed--transparent d-flex flex-center" style="height: 333px; padding: 36px 0 56px">
                    <div class="text--center flex-self-center">
                        <h2 class="m-0 mb-24 text--bbold size--18">거래용 보안비밀번호 변경</h2>
                        <h2 class="m-0 text--medium text-bold ">보안비밀번호(Pin Number)가 변경되었습니다.</h2>
                    </div>
                </div>
            </div>
            <script>
                $('#change-security-password').submit((e) => {
                    e.preventDefault()

                    let check = true
                    let pin = ''
                    $('#change-security-password .grid--code input[type=number]').each((_index, elem) => {
                        if(!$(elem).val()) {
                            check = false
                            $(elem).focus()
                            return false
                        }

                        pin += $(elem).val()
                    })

                    if(check) {
                        API.checkPin(pin, (resp) => {
                            if(resp.success) {
                                $('#change-security-password').hide()
                                $('#change-security-password2').show()
                            } else {
                                alert(resp.error.message)
                            }
                        })
                    }

                    return false
                })

                $('#change-security-password2').submit((e) => {
                    e.preventDefault()

                    let check = true
                    let pin = ''
                    $('#change-security-password2 .grid--code input[type=number]').each((_index, elem) => {
                        if(!$(elem).val()) {
                            check = false
                            $(elem).focus()
                            return false
                        }

                        pin += $(elem).val()
                    })

                    $('#change-security-password2').hide()
                    $('#change-security-password-confirm').show()

                    return false
                })
                $('#change-security-password-confirm').submit((e) => {
                    e.preventDefault()

                    let check = true
                    let pin = ''
                    let pin2 = ''

                    $('#change-security-password2 .grid--code input[type=number]').each((_index, elem) => {
                        pin += $(elem).val()
                    })
    
                    $('#change-security-password-confirm .grid--code input[type=number]').each((_index, elem) => {
                        if(!$(elem).val()) {
                            check = false
                            $(elem).focus()
                            return false
                        }

                        pin2 += $(elem).val()
                    })

                    if(pin === pin2) {
                        API.putMyInfo({
                            pin: pin
                        }, (resp) => {
                            if(resp.success) {
                                $('#change-security-password-confirm').hide()
                                $('#change-security-password-complete').hide()
                            } else {
                                alert(resp.error.message)
                            }
                        })
                    } else {
                        alert('핀번호가 다릅니다. 다시 확인해 주세요')
                    }

                    return false
                })
            </script>
        </div>
    </main>
    <footer>
        <div class="logo">Teaplat</div>
        <nav class="fnb">
            <ul>
                <li>
                    <a href="">회사소개</a>
                </li>
                <li>
                    <a href="">이용약관</a>
                </li>
                <li>
                    <a href="">개인정보보호정책</a>
                </li>
                <li>
                    <a href="faq.html">자주묻는질문</a>
                </li>
            </ul>
        </nav>
        <div class="copyright">
            <span class="company--name">(주)끽다거</span>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="company--ceo">대표이사 : 안성희</span>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="company--number">사업자등록번호 : 824-87-00881</span>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="company--address">주소 : 서울특별시 종로구 계동 126번지 1호</span>
            <br>
            전화 : 02-733-9746
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            통신판매업신고번호 : 제 2021-서울종로-0444호
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            이메일 : kkikdageo@naver.com
            <br><br>
            Copyright © 2022 (주)끽다거. All rights reserved. 
        </div>
        <span class="customer--text">고객상담 · 상담 · 배송 문의</span>
        <span class="customer--number">02-733-9746</span>
        <span class="customer--time">평일 10:00 ~ 18:00(점심 13:00 ~ 14:00)</span>
    </footer>
</body>
</html>