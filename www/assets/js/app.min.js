function disableclick(e){if(2==e.button)return!1}function setCookie(e,t,o){var n=new Date;n.setDate(n.getDate()+o),document.cookie=e+"="+escape(t)+"; path=/; expires="+n.toGMTString()+";"}function getCookie(e){for(var t=e+"=",o=0;o<=document.cookie.length;){var n=o+t.length;if(document.cookie.substring(o,n)==t){-1==(endOfCookie=document.cookie.indexOf(";",n))&&(endOfCookie=document.cookie.length);var a=unescape(document.cookie.substring(n,endOfCookie));return"undefined"==a?"":a}if(o=document.cookie.indexOf(" ",o)+1,0==o)break}return""}function getURLParameter(e,t){return t=new URL(t||window.location.href),r=t.searchParams.get(e),r||""}function setURLParameter(e,t,o){return o=trim(o),o=o||window.location.origin,o="."===o?window.location.href:o,o=0===o.indexOf("./")?window.location.origin+o:o,o=0===o.indexOf("/")?window.location.origin+o:o,o=o.indexOf("http")<0?window.location.origin+"/"+o:o,o=new URL(o),o.searchParams.set(e,t),o.href}function real_number_format(e,t){(void 0===e||""==e||is_null(e)||is_nan(e))&&(e="0");var o=e<0?"-":"";t&&(e=number_format(e,t)),e+="",e=e.replace(/[^0-9.]/g,"");var n=e.split(".");return n[0]=1==n[0].length?n[0]:n[0].replace(/^0+/g,""),1e3<=e&&(n[0]=number_format(n[0])),n[1]=n[1]?n[1].replace(/0{1,}$/g,""):"",n=n[1]&&n[1].length>0?n.join("."):n[0],o+n}function get_keycode(e){return e.which?e.which:window.event.keyCode}function get_str_by_keycode(e){let t="";return t=null==window.event.which?String.fromCharCode(event.keyCode):String.fromCharCode(window.event.which),t}function input_filter_number(e){let t=e.which?e.which:event.keyCode,o=String.fromCharCode(t);if(o.match(/[^0-9]/g)&&8!=t&&9!=t&&46!=t&&35!=t&&36!=t&&37!=t&&38!=t&&39!=t&&40!=t&&96!=t&&97!=t&&98!=t&&99!=t&&100!=t&&101!=t&&102!=t&&103!=t&&104!=t&&105!=t&&48!=t&&49!=t&&50!=t&&51!=t&&52!=t&&53!=t&&54!=t&&55!=t&&56!=t&&57!=t)return!1}function htmlencode(e){return e.replace(/[&<>"']/g,function(e){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[e]+";"})}$("label,.btn,button,a,th").on("contextmenu selectstart dragstart",function(){return!1}),$("body").on("contextmenu",function(){return!1}),document.onmousedown=disableclick,$(document).ready(function(){$(document).bind("keydown",function(e){get_keycode(e);if(123==e.keyCode)return e.preventDefault(),e.returnValue=!1,!1})}),translate(),jQuery(function($){function thumbnail_video(e){var t=document.getElementById("canvas");t.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight)}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader,o=document.getElementById("photo");t.onload=function(e){$("#photo").attr("src",e.target.result),o.onload=function(){imgW=this.naturalWidth,imgH=this.naturalHeight,imgW>imgH?$("#photo").addClass("land"):$("#photo").removeClass("land")}},t.readAsDataURL(e.files[0])}}function view_image(e,t,o){var n=t?t.get(0):null,a="";let i=n.tagName.toUpperCase();if(e.files&&e.files[0]){var r=new FileReader;if(!n)return;return r.onload=function(e){a=e.target.result,"IMG"==i?t.attr("src",a):t.css("background","url("+a+") no-repeat 50% 50%/cover #e1e1e1"),n.onload=function(){imgW=this.naturalWidth,imgH=this.naturalHeight,imgW>imgH?t.addClass("land"):t.removeClass("land")}},r.readAsDataURL(e.files[0]),!0}return("hidden"==e.type||"text"==e.type)&&(a=e.value,"IMG"==i?t.attr("src",a):t.css("background","url("+a+") no-repeat 50% 50%/cover #e1e1e1"),!0)}function view_video(e,t){if(e.files&&e.files[0]){var o=new FileReader,n=t?t.get(0):null;if(!n)return;o.onload=function(e){t.attr("src",e.target.result),n.onload=function(){iframeW=this.naturalWidth,iframeH=this.naturalHeight,iframeW>iframeH?t.addClass("land"):t.removeClass("land")}},o.readAsDataURL(e.files[0])}}function view_video_thumnail(e,t){var o=e.target.files[0],n=new FileReader;n.onload=function(){var e=new Blob([n.result],{type:o.type}),a=URL.createObjectURL(e),i=document.createElement("video"),r=function(){l()&&(i.removeEventListener("timeupdate",r),i.pause())};i.addEventListener("loadeddata",function(){l()&&i.removeEventListener("timeupdate",r)});var l=function(){var e=document.createElement("canvas");e.width=i.videoWidth,e.height=i.videoHeight,e.getContext("2d").drawImage(i,0,0,i.videoWidth,i.videoHeight);var o=e.toDataURL(),n=o.length>1e5;return n&&($("#thumb1").css("background","url("+o+") no-repeat 50% 50%/cover #e1e1e1"),URL.revokeObjectURL(a)),t&&"function"==typeof t&&t(),n};i.addEventListener("timeupdate",r),i.preload="metadata",i.src=a,i.muted=!0,i.playsInline=!0,i.play()},n.readAsArrayBuffer(o)}const SERVICE_NAME="kkikda";$(".box_language").on("click",".box_current",function(){$(".box_option").toggle(),$(this).find(".arrow.up,.arrow.down").toggle()}),$(".box_language").on("click",".box_option",function(){let e=$(this).attr("data-lang");e!=window.lang&&($(".box_option").toggle(),_c(e,function(){window.location.reload()}))}),$(window).resize(function(){}),$(document).on("change","input.file-upload",function(){var e=$(this).closest(".file-select"),t=$(this)[0].files[0],o=$(this)[0].files[0].size,n=o/Math.pow(1024,2);if(t.type.match("image.*"));else if(t.type.match("video.*")){var a=100;if(n>a)alert(__("100MB를 넘는 영상은 유투브 등에 업로드하시고 소스 코드를 복사해서 붙여주세요."));else{if(window.FileReader)var i=t.name;else i=$(this).val().split("/").pop().split("\\").pop();e.find("input.file-name").val(__("파일이름")+" : "+i)}}});const upload_file=function(e,t){t=t||"";let o="";if(""!=$.trim(e.val())){$form=$('<form><input type="hidden" name="token" value="'+getCookie("token")+'"></form>'),$form.attr("enctype","multipart/form-data"),e.attr("name","file_data").after(e.clone(!0)),$form.append(e);var n=new FormData($form[0]);$.ajax({url:API_URL+"/upload/?",async:!1,processData:!1,contentType:!1,data:n,type:"POST",success:function(e){if(e&&e.success&&e.payload){let n=e.payload[0];n.url?o=n.url:alert(__("{item_name} 파일을 저장하지 못했습니다.").replace("{item_name}",t))}else{let o=e.error&&e.error.message?e.error.message:"";alert(__("{item_name} 파일을 저장하지 못했습니다.").replace("{item_name}",t)+" "+o)}},fail:function(){alert(__("{item_name} 파일을 업로드하지 못했습니다.").replace("{item_name}",t))}})}return o},APP_NAME="stube",APP_VERSION="1.00.1",APP_LOAD_TIME=(new Date).getTime();let APP_RUNMODE="live",TOKEN_DOMAIN=window.location.host,API_URL="//api."+window.location.host.replace("www.","")+"/v1.0";SERVICE_DOMAIN=window.location.host.replace("www.",""),-1===window.location.host.indexOf("loc.")&&-1===window.location.host.indexOf("localhost")||(APP_RUNMODE="loc",API_URL="//api."+window.location.host+"/v1.0"),-1!==window.location.host.indexOf("dev.")&&(APP_RUNMODE="dev",API_URL="//api."+window.location.host+"/v1.0"),-1!==window.location.host.indexOf("stage.")&&(APP_RUNMODE="stage",API_URL="//api."+window.location.host+"/v1.0");const LOGIN_PAGE="/login.html";$.fn.numericVal=function(){return 1*$(this).val().replace(/[^0-9.]/g,"")},$.fn.hScroll=function(e){e=e||120,$(this).bind("DOMMouseScroll mousewheel",function(t){var o=t.originalEvent,n=o.detail?o.detail*-e:o.wheelDelta,a=$(this).scrollLeft();a+=n>0?-e:e,$(this).scrollLeft(a),t.preventDefault()})};let APP_LANG=window.lang||"ko";const change_language=function(e){e&&e!==APP_LANG&&(tpl={},APP_LANG=e,$("html").attr("lang",APP_LANG),Model.user_info.userid&&add_request_item("putMyInfo/putLanguage.php",{display_language:e},function(e){}),_c(e,function(){reload()}))};$(".box_language").on("click",function(){$(".box_language .flags").toggle()}),$(".box_language [name=btn_language]").on("click",function(){let e=$(this).attr("data-lang");change_language(e)});var referrer="";let path_name=window.location.pathname,page_name="",__listener__={},__data__={},model_item=!1,session_item=model_item&&model_item.session_item||["token","user_info","user_wallet","visited_notice","hide_popup_time","user_goods"],local_item=model_item&&model_item.local_item||["hide_notice","auto_login","exchange_rate","goods","web_config","company_info","last_login_info","currency","hide_popup_time","model_item"],cookie_item=model_item&&model_item.cookie_item||["check_pin"],_no=(Math.random()+(new Date).getTime()/Math.random()+"").replace(".",""),key=getCookie("token");key?key=APP_NAME+APP_VERSION+key:(setCookie("token",_no,0,TOKEN_DOMAIN),key=APP_NAME+APP_VERSION+_no);const set_model_location=function(e,t){"session"===t&&(local_item=remove_array_by_value(local_item,e),void 0===session_item[e]&&session_item.push(e)),"local"===t&&(session_item=remove_array_by_value(session_item,e),void 0===local_item[e]&&local_item.push(e))},clone=function(e){return JSON.parse(JSON.stringify(e))},addChangeListener=function(e,t,o){const n=t;__listener__[e]?__listener__[e][n]=o:(__listener__[e]={},__listener__[e][n]=o)},rander=function(e,t,o,n){for(i in t){let a=t[i],r=null,l=o&&o[i]?o[i]:"";(a!==l||n)&&(typeof a==typeof{}?rander(e+"."+i,a,l,n):($('[data-bind="'+e+"."+i+'"]').each(function(){var e=this.tagName,t=(e=e.toUpperCase(),$(this).attr("data-format"));switch(t){case"table":const e=a,o=$(this),n=o.find("[name=empty]"),i=o.find("[name=search]");if(i.hide().addClass("hide"),n.hide().addClass("hide"),!e||e.length<1)n.show().removeClass("hide"),o.children().not("[name=tpl],[name=search],[name=empty]").remove();else{let t=[],n=$("<div></div>").append(o.find("[name=tpl]").clone().attr("name","").removeClass("hide"));for(let o in e){let a=e[o],i=n.clone();for(let e in a){let t=i.find('[data-bind="row.'+e+'"]'),o=a[e],n=t.attr("data-format"),r=t.attr("data-decimals");switch(n){case"attr":t.attr("data-"+e,o);break;case"comma":t.text(real_number_format(o,r));break;case"date":t.each(function(){let e=$(this).attr("data-date_format")||"";$(this).text(e?date(e,o):o)});break;case"add-class":t.addClass(o);break;case"number":t.text((o+"").replace(/[^0-9.-]/g,""));break;default:t.each(function(){const e=this.tagName?this.tagName.toUpperCase():"";switch(e){case"A":t.attr("href",o);break;default:"html"==n?t.html(o):t.text(o)}})}}t[o]=i.html()}o.children().not("[name=tpl],[name=search],[name=empty]").remove(),o.append(t.join(""))}break;case"comma":r=real_number_format(a);break;case"number":r=1*(a+"").replace(/[^0-9.]/g,"");break;case"add-class":return void $(this).addClass(a);default:r=a}switch(e){case"INPUT":let t=($(this).attr("type")+"").toUpperCase();switch(t){case"CHECKBOX":let e=a==$(this).val();(e&&!$(this).is(":checked")||!e&&$(this).is(":checked"))&&$(this).trigger("click");break;case"RADIO":r==$(this).val()&&$(this).trigger("click");break;case"NUMBER":case"HIDDEN":$(this).val(r);break;default:r=r&&r.toNumber()==r&&"number"==(typeof r).toLowerCase()&&!(r+"").match(/[^0-9.]/)?real_number_format(r):r,$(this).val(r)}break;case"TEXTAREA":case"SELECT":$(this).val(r);break;case"IMG":case"IFRAME":$(this).attr("src",r);break;default:"userid"!=i&&(r=r&&r.toNumber()==r&&"number"==(typeof r).toLowerCase()&&!(r+"").match(/[^0-9.]/)?real_number_format(r):r),$(this).html(r)}}),$('[data-display^="'+e+"."+i+'"]').each(function(){let e=$(this).attr("data-display");e=e.split("="),a==e[1]?$(this).removeClass("hide").attr("style",""):$(this).addClass("hide").attr("style","")})))}};"live"!=APP_RUNMODE&&(window.rander=rander);const force_rander=function(e,t){rander(e,t,t,!0)};"live"!=APP_RUNMODE&&(window.force_rander=force_rander);const _get_Model_value=function(e,t){let o=e[t]?JSON.parse(Decrypt(e[t],key,256)):"";try{session_item.indexOf(t)>-1&&sessionStorage.getItem(t)&&(o=JSON.parse(Decrypt(sessionStorage.getItem(t),key,256))),local_item.indexOf(t)>-1&&(o=JSON.parse(Decrypt(localStorage.getItem(t),key,256))),cookie_item.indexOf(t)>-1&&(o=getCookie(t))}catch(e){o=""}return o},handler={get:function(e,t){return _get_Model_value(e,t)},set:function(e,t,o){let n=_get_Model_value(e,t);try{session_item.indexOf(t)>-1?sessionStorage.setItem(t,Encrypt(JSON.stringify(o),key,256)):local_item.indexOf(t)>-1?localStorage.setItem(t,Encrypt(JSON.stringify(o),key,256)):cookie_item.indexOf(t)>-1?setCookie(t,o):e[t]=Encrypt(JSON.stringify(o),key,256),JSON.stringify(o)!==JSON.stringify(n)&&rander&&rander(t,o,n)}catch(e){}return!0}};let Model={};try{Model=new Proxy(__data__,handler)}catch(e){let t=clone(Model);const o=function(){for(i in Model){let e=Model[i],o=t[i];JSON.stringify(e)!==JSON.stringify(o)&&rander&&rander(i,e,o)}t=clone(Model),setTimeout(function(){o()},100)};o()}"live"!=APP_RUNMODE&&(window.Model=Model),Model.check_SMS_for_bank=!1,Model.currency={KRW:{pre_symbol:"",sub_symbol:__("원"),exchange_price:76e-5,is_blockchain:!1,is_virtual_currency:!1,symbol_image:"",name:"대한민국 원"},USD:{pre_symbol:"$ ",sub_symbol:"",exchange_price:1,is_blockchain:!1,is_virtual_currency:!1,symbol_image:"",name:"USD"}},Model.exchange_rate={base_currency:"USD",base_symbol:"$",KRW:Model.currency.KRW.exchange_price,USD:Model.currency.USD.exchange_price},Model.company_info={bank_name:"",bank_address:"",depositor:"",fee_address:{BDC:"",GWS:"",HTC:"",KRW:""}},Model.goods={product:[]},Model.web_config={};var items=[],callbacks=[],timeoutkeys=[],request_warkable=!0;const request_api=function(){if(setTimeout(request_api,300),request_warkable&&items&&items.length>0){request_warkable=!1;var e=items,t=callbacks;items=[],callbacks=[];let o={item:e};o.token=getCookie("token"),$.post(API_URL+"/request/?",o,function(e){request_warkable=!0;const o=e.payload.length;for(let n=0;n<o;n++){const o=e.payload[n],a=JSON.parse(o.data);a.error&&a.error.code,t[n]&&t[n](a,n)}},"json")}};request_api();const add_request_item=function(e,t,o,n,a,i){var r=path_name;a=a||r;if(n>0&&a!==r)return!1;t.lang=APP_LANG,Model.token&&(t.token=Model.token);const l={method:e,params:t};if(!i)for(var s in items)if(JSON.stringify(items[s])==JSON.stringify(l))return;items.push(l);let c=items.length-1;if(callbacks[c]=o,n>0&&a===r){let a=setTimeout(function(){add_request_item(e,t,o,n,r)},n);timeoutkeys[c]=a}},dprice=function(e,t){let o=t||Model.user_info&&Model.user_info.exchange_currency||"USD",n=Model.currency[o].pre_symbol,a=Model.currency[o].sub_symbol,i=Model.currency[o].exchange_price;return n+real_number_format(e*i)+a},genPagingStube=function(e,t,o,n){for(e=e?1*e:0,t=t?1*t:1,o=o?1*o:10,n=n?1*n:10,max_pages=e?Math.ceil(e/o):1,r="",r+=e>0&&t>1?'<span><a href="'+setUrlParamValue("page",t-1,window.location.search)+'"><img src="/@resource/images/icon/ico_arr_prev.png" alt=""></a></span>':'<span><img src="/@resource/images/icon/ico_arr_prev.png" alt="" class="inactive"></span>',batch=Math.ceil(t/n),end=batch*n,end,end>max_pages&&(end=max_pages),start=end-n+1,start=start<1?1:start,i=start;i<=end;i++)i==t?r+='<span class="num active"><a href="'+setUrlParamValue("page",i,window.location.search)+'">'+i+"</a></span>":r+='<span class="num"><a href="'+setUrlParamValue("page",i,window.location.search)+'">'+i+"</a></span>";return e>0&&t<max_pages?r+='<span><a href="'+setUrlParamValue("page",t+1,window.location.search)+'"><img src="/@resource/images/icon/ico_arr_next.png" alt=""></a></span>':r+='<span><img src="/@resource/images/icon/ico_arr_next.png" alt="" class="inactive"></span>',r},display_remain_time=(e,t,o)=>{let n=e-Math.floor((new Date).getTime()/1e3),a=n<0?0:Math.floor(n/60),i=n<0?0:n%60;$(t).text(sprintf("%02d",a)),$(o).text(sprintf("%02d",i)),n>=0&&setTimeout(function(){display_remain_time(e,t,o)},500)},load_file=e=>{if($("#"+md5(e)).length>0)return!1;e.indexOf(".js")>0&&$("body").append('<script type="text/javascript" src="'+e+'" id="'+md5(e)+'"></script>'),e.indexOf(".css")>0&&$("head").append('<link rel="stylesheet" type="text/css" href="'+e+'" id="'+md5(e)+'">')},gen_qrcode=(e,t)=>{$(e).empty().qrcode({width:$(e).width(),height:$(e).width(),text:t})},CopyUrlToClipboard=e=>{var t=document.getElementById("ShareUrl");t.value=window.document.location.href,t.select(),document.execCommand("copy"),t.blur()};let sound_obj={};const sound_file={};for(i in sound_file){let e=new Audio;e.src=sound_file[i],sound_obj[i]=e}const sound_play=e=>{"N"!==Model.user_info.sound_onoff&&sound_obj[e]},get_video_url=function(e){e=$.trim(e);let t="";return e.indexOf("//youtu.be/")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/youtu.be\//,"").replace(/\&.*/,""):e.indexOf("//youtube.com/watch?v=")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/youtube.com\/watch\?v=/,"").replace(/\&.*/,""):e.indexOf("//m.youtube.com/watch?v=")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/m.youtube.com\/watch\?v=/,"").replace(/\&.*/,""):e.indexOf("//www.youtube.com/watch?v=")>-1?t="https://www.youtube.com/embed/"+e.replace(/.*\/\/www.youtube.com\/watch\?v=/,"").replace(/\&.*/,""):e.indexOf("<iframe ")>-1?(t=e.match(/src="(.[^"]*)"/),t=t?t[1]:e.match(/src='(.[^']*)'/)?e.match(/src='(.[^']*)'/)[1]:"",t=t||(e.match(/src=(.[^ ]*) /)?e.match(/src=(.[^ ]*) /)[1]:"")):e.indexOf("http://")>-1||e.indexOf("https://"),t},get_video_img=function(e){let t=[];if(e.indexOf("youtube")>-1){let o="";e.indexOf("//www.youtube.com/embed/")>-1&&(o=e.replace("https://www.youtube.com/embed/",""),o&&o.indexOf("?")>-1&&(o=o.substr(0,o.indexOf("?")))),e.indexOf("//www.youtube.com/watch")>-1&&(o=e.match(/youtube.com\/watch\?v=(.[^&]*)/),o=o?o[1]:""),$.get({url:"https://www.youtube.com/oembed?format=xml&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D"+o,async:!1,success:function(e){t.push($("thumbnail_url",t).text())}})}return t},check_userinfo=function(){return Model.user_info&&Model.user_info.userno?Model.user_info&&Model.user_info.userno&&!Model.user_info.nickname?(alert(__("회원정보를 등록 해주세요")),closeModal(),$('.btn-user-menu[name="btn-userinfo"]').click(),!1):void 0:(alert(__("로그인 해주세요")),closeModal(),!1)},use_http=function(){};let scroll_searching=!1,scroll_end=!1;const tpl_video_item='<li><a href="/views.php?video_idx={video_idx}"><div class="img" style="background-image:url({video_img});background-size:cover" alt="{title}"></div></a><div class="explan"><a href="user-main.php?userno={video_userno}"><span class="picture" style="background-image:url({user_profile_img})"></span></a><p class="txt"><a href="/views.php?video_idx={video_idx}">{title}</a></p><div class="pay_date"><p class="pay"><a href="user-main.php?userno={video_userno}"><span class="name">{nickname}</span></a><span class="ico_pay"></span><span>{view_cnt}</span></p><p class="date">{reg_date}</p></div></div></li>',gen_video_htmnl=function(e){if(e&&e.payload){let t=[],o=e.payload.data||[];for(o.length<1&&(scroll_end=!0),i=0;i<o.length;i++){let e=o[i];t[i]=tpl_video_item.replace(/\{video_img\}/g,e.file_name||"about:blank").replace(/\{user_profile_img\}/g,e.profile_img||"/@resource/images/common/basic_profile.png").replace(/\{nickname\}/g,e.nickname||"").replace(/\{title\}/g,e.title||"").replace(/\{reg_date\}/g,e.reg_date.substr(1,10)||"").replace(/\{video_idx\}/g,e.idx||"").replace(/\{video_userno\}/g,e.userno||"").replace(/\{view_cnt\}/g,real_number_format(e.view_cnt)||"")}$(".play-list ul.item-grid").append(t.join(""))}scroll_searching=!1},add_event_click_left_menu_tab=function(){$("#left_menu .inTabs li").on("click",function(){let e=$(this).attr("data-target");$(this).addClass("active").siblings().removeClass("active"),$(e).show().siblings(".tab_con").hide()})},check_login=function(e){Model.user_info&&(Model.user_info.userid||Model.user_info.userno)||(e&&alert(e),window.location.href=LOGIN_PAGE)},check_logout=function(e){Model.user_info&&Model.user_info.userid&&Model.user_info.userno&&(e&&alert(e),window.location.href="/")},get_new_message=function(e){let t=$("[name=msg_box]:last").attr("data-idx");add_request_item("getChatMessage",{token:getCookie("token"),last_msg_idx:t,target_idx:window.chat_target_idx},function(e){if(e&&e.success&&e.payload&&!e.error){let t=e.payload,o=[],n=0,a=!1;if(t.length>0){for(n in t){let e=t[n];$("li[name=msg_box][data-idx="+e.idx+"]").length>0||(o[n]=get_html(e),n++)}$(".comment-wrap").scrollTop()+$(".comment-wrap").innerHeight()>$(".comment-wrap")[0].scrollHeight-20&&(a=!0),$("[name=comment-list]").append(o.join("")),a&&set_scroll_bottom()}}}),e>0&&setTimeout(function(){get_new_message(e)},e)},tpl_suport='<div class="realtime_spon" name="msg_box" data-idx="{idx}">    {html_delete_icon}    <p class="pay_meney">{amount_str}<img src="/@resource/images/icon/ico_smart_pay.png" alt=""></p><p class="txt"><a href="/user-main.php?userno={userno}">{nickname}</a> 님이 {amount_str} PAY를 조공하였습니다</p></div>',tpl_chat='<dl name="msg_box" data-idx="{idx}">    {html_delete_icon}    <dt><a href="/user-main.php?userno={userno}"><img src="{profile_img}" alt="{nickname}"></a></dt><dd><p class="name"><a href="/user-main.php?userno={userno}">{nickname}</a> <img src="/@resource/images/icon/ico_fan1.png" alt=""></p><p class="txt">{comment}</p></dd></dl>',get_html=function(e){let t=e.amount>0?tpl_suport:tpl_chat;return t.replace(/\{idx\}/g,e.idx).replace(/\{profile_img\}/g,e.profile_img||"/@resource/images/common/basic_profile.png").replace(/\{nickname\}/g,e.nickname||e.name).replace(/\{amount\}/g,e.amount).replace(/\{userno\}/g,e.userno).replace(/\{amount_str\}/g,number_format(e.amount)).replace(/\{coinname\}/g,Model.currency&&Model.currency[e.symbol]&&Model.currency[e.symbol].name).replace(/\{coin_icon\}/g,get_coin_icon_class(e.amount)).replace(/\{comment\}/g,nl2br(htmlspecialchars(e.comment))).replace(/\{supported-user\}/g,e.amount>0?"supported-user":"").replace(/\{hide_spon\}/g,e.amount>0?"":"hide").replace(/\{html_delete_icon\}/g,e.userno==Model.user_info.userno?'<a href="#" class="chat_close"><img src="/@resource/images/icon/ico_close2.png" alt="" data-idx="'+e.idx+'" class="btn btn-delete-msg"></a>':"")},get_old_message=function(){if(scroll_searching||scroll_end)return!1;scroll_searching=!0;let e=$("[name=msg_box]:first").attr("data-idx");add_request_item("getChatMessage",{token:getCookie("token"),prev_msg_idx:e,target_idx:window.chat_target_idx},function(t){if(scroll_searching=!1,t.payload&&t.payload.length||(scroll_end=!0,$("[name=comment-list]").prepend('<li class="center">'+__("더이상 내용이 없습니다.")+"</li>")),t&&t.success&&!t.error){let o=t.payload,n=[],a=0;for(a in o){let e=o[a];n[a]=get_html(e),a++}$("[name=comment-list]").prepend(n.join("")),$(".comment-wrap").scrollTop($("li[data-idx="+e+"]").position().top)}})},set_scroll_bottom=function(){$(".comment-wrap:visible").scrollTop($("[name=comment-list]:visible").height())},set_position_chatbox=function(){$(".right_menu").is(":visible")?($(".mobile_cheat_box").hide(),set_scroll_bottom()):($(".mobile_cheat_box").show(),set_scroll_bottom())},fn_index=function(){API.getBBSList("notice",1,5,e=>{e.success&&($("#notice--list").empty(),e.payload.data.map(e=>{const t=$("<li>"),o=new Date(e.regdate);t.append(`<a href="notice_detail.html" class="list--text">${e.subject}</a>`),t.append(`<span class="list--date list--right">${o.getFullYear()}.${o.getMonth()}.${o.getDate()}</sp>`),t.appendTo("#notice--list")}))})},fn_login=function(){check_logout(),window.keypress_support=!1,$("#box_login form").each(function(){$(this).reset&&$(this).reset()}),$("#box_login [name=email]").get(0).focus(),$("#box_login form[name=login]").on("submit",function(e){e.preventDefault();const t=$("#email"),o=trim(t.val()),n=$("#password"),a=trim(n.val());return o?a?(API.login(o,a,e=>{if(e&&e.success&&e.payload){setCookie("token",e.payload.token),Model.token=e.payload.token,Model.last_login_info={userid:o};let t={userid:o};Model.user_info=t,get_user_wallet(),get_user_info();let n=getURLParameter("ret_url");n=n?$.trim(base64_decode(n)):"/",n=setURLParameter("t",time(),n),window.location.href=n}else{let t=e.error&&e.error.message?e.error.message:__("로그인 정보가 올바른지 확인해주세요.");$(".validation--message").find(">p").text(t).end().show()}}),!1):(n.focus(),!1):(t.focus(),!1)})},fn_logout=function(){$.post(API_URL+"/logout/",{token:getCookie("token")},function(e){Model.user_info={},reset_logedin_status(),Model.auto_login=!1,Model.visited_notice=!1,setCookie("token","",-1),setCookie("token","",-1,"."+TOKEN_DOMAIN),window.location.href="/"})};window.logout=fn_logout,fn_member_account=function(){get_user_info(),force_rander("user_info",Model.user_info)},fn_repw=function(){check_logout(__("로그아웃 해주세요.")),$("[name=btn_repw]").on("click",function(){$("[name=box_notice]").html("").parent().hide();let t=$("[name=pin]").val();if(!t)return e(__("비밀번호를 입력해주세요.")),$("[name=pin]").trigger("select"),!1;let o=$("[name=pin2]").val();if(t!=o)return e(__("비밀번호가 다릅니다.")+" "+__("올바른 비밀번호를 다시 입력해주세요.")),$("[name=pin2]").trigger("select"),!1;const n={t:getURLParameter("t"),pin:t};return add_request_item("resetPW",n,function(e){if(e&&e.success)$("#form_repw").length>0&&$("#form_repw").get(0).reset(),alert(__("Changed your password.")+" "+__("Please log in again.")),setTimeout(function(){window.location.href="login.html"},2e3);else{let t=e.error&&e.error.message?e.error.message:"";alert(__("Failed to change password.")+" "+t)}}),!1});const e=function(e){$("[name=box_notice]").html(e).parent().show()}};const reset_logedin_status=function(){const e=Model.user_info;e.userno&&e.userid?($("[name=box_logedin]").show(),$("[name=box_unlogedin]").hide()):($("[name=box_logedin]").hide(),$("[name=box_unlogedin]").show())};$('[name="btn-logout"]').on("click",function(){return fn_logout(),!1}),$('[name="btn-profile"]').on("click",function(){return $(".box_submenu").toggle(),!1});const default_profile_img="/@resource/images/common/basic_profile.png";$(document).on("error",".img_profile",function(){alert(1),$(this).attr("src",default_profile_img)});let page_controller=window.location.pathname.replace(/\/(.*).php|.html/,"$1");page_controller=page_controller.replace(/-/g,"_"),page_controller=page_controller&&"/"!=page_controller?page_controller:"index",page_controller=0===page_controller.indexOf("/")?substr(page_controller,1):page_controller;try{eval("fn_"+page_controller+"()")}catch(e){}const get_user_info=function(){add_request_item("getMyInfo",{token:getCookie("token")},function(e){if(e&&e.success&&!e.error){let t=e.payload;Model.user_info=t,force_rander("user_info",t),reset_logedin_status()}})};get_user_info();const get_user_wallet=function(){add_request_item("getBalance",{token:getCookie("token")},function(e){if(e&&e.success&&!e.error){let t={};for(i in e.payload){let o=e.payload[i];o.confirmed=1*o.confirmed,o.unconfirmed=1*o.unconfirmed,t[o.symbol]=o}Model.user_wallet=t}})};get_user_wallet();const get_currency=function(){add_request_item("getCurrency",{},function(e){if(e&&e.success&&!e.error){let t=Model.currency,o=Model.exchange_rate;for(i in e.payload){let n=e.payload[i];"HTC"==n.symbol&&(n.price=1e4),t[n.symbol]?(t[n.symbol].exchange_price=1*n.price,t[n.symbol].name=n.name):t[n.symbol]={exchange_price:1*n.price,is_blockchain:"Y"==n.crypto_currency,is_virtual_currency:!0,pre_symbol:"",sub_symbol:" "+n.symbol,name:" "+n.name,symbol_image:""},o[n.symbol]&&(o[n.symbol]=1*n.price)}Model.currency=t,Model.exchange_rate=o}})};get_currency(),$(".scroll-content").length>0&&$(".scroll-content").each(function(){$(this).scrollbar({ignoreMobile:!0})}),$(document).on("keyup",".onlynum",function(e){$(this).val($(this).val().replace(/[^0-9.,]/g,""))}).on("keydown",".onlynum",input_filter_number),$(document).on("keyup change",".realnumber",function(e){$(this).val(real_number_format($(this).val()))}).on("keydown",".onlynum",input_filter_number),$(document).on("keyup",".onlyeng",function(e){$(this).val($(this).val().replace(/[^\!-z]/g,""))})});